
linode: teddy
hostXen:
tencent: 老高
--------------------------------------------------------


# 老高的安装linux-centos7
https://gist.github.com/phpgao/7b2a684de565719a0edd323f659ef678
sh -c "$(curl -fsSL https://bit.ly/2GppK6X)"

systemctl enable shadowsocks-server
# 重启ss服务
systemctl restart shadowsocks-server
systemctl stop shadowsocks-server
systemctl status shadowsocks-server

# 重启kcptun服务
systemctl restart kcp-server

# 卸载ss
systemctl stop shadowsocks-server
systemctl disable shadowsocks-server
rm -f /etc/ss-config.json /etc/systemd/system/shadowsocks-server.service
systemctl daemon-reload


MTY:
{
    "server_port":49999,
    "password":"ZGRiMGI0NmI1",
    "timeout":60,
    "method":"rc4-md5"
}
--------------------------------------------------------
2018-07-13
*****https://teddysun.com/342.html*****
wget --no-check-certificate -O shadowsocks.sh https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks.sh
chmod +x shadowsocks.sh
./shadowsocks.sh 2>&1 | tee shadowsocks.log
./shadowsocks.sh uninstall # uninstall
启动：/etc/init.d/shadowsocks start
停止：/etc/init.d/shadowsocks stop
重启：/etc/init.d/shadowsocks restart
状态：/etc/init.d/shadowsocks status

-- KCPTUN
wget https://github.com/xtaci/kcptun/releases/download/v20180316/kcptun-linux-amd64-20180316.tar.gz
./server_linux_amd64 -t "127.0.0.1:30001" -l ":4000" -mode fast2 > kcptun.log 2>&1 &
./server_linux_amd64 --listen 0.0.0.0:4000 --target 127.0.0.1:30001 --crypt rc4-md5 --key win4sea.com
sudo netstat -tulpn | grep 4000

--------------------------------------------------------
# 配置多用户与流量限制
1)https://www.rosehosting.com/blog/how-to-install-plsython-3-6-4-on-centos-7
2)
pip3.6 install shadowsocks  successed!! 然后又失败了

ssserver -s 172.105.221.193 -p 30001 -k zhengwei -m camellia-128-cfb --user nobody -d start
ssserver -s 178.79.134.128 -p 30001 -k zhengwei -m chacha20 --user nobody -d start
ssserver -d stop

3)
https://www.bfdz.ink/2016/11/14/30/
yum install unzip bc
下载ss
wget https://github.com/hellofwy/ss-bash/archive/master.zip
unzip master.zip
使用
cd ss-bash-master/
./ssadmin.sh -h

./ssadmin.sh add 8388 123456 100G/etc
./ssadmin.sh add 30001 zhengwei2017 50G
./ssadmin.sh start
./ssadmin.sh soft_restart
# 用户使用量清零


# 配置开机启动
sudo vi /etc/rc.local
/root/ss-bash-master/ssadmin.sh start
---------------------------------------------------------
ssserver -c /etc/shadowsocks/config.json -d start 后台启动
ssserver -c /etc/shadowsocks/config.json -d stop 后台停止

{
    "server": "139.162.71.205",
    "local_address":"127.0.0.1",
    "local_port":1080,
    "timeout": 300,
    "method": "chacha20",
    "port_password": {
        "30001": "zhengwei2017",
        "30003": "yanhongqiang"
    }
}
--------------------------------------------------------
# 设置主机域名
hostname  www  #设置主机名为www
vi /etc/hostname #编辑配置文件

www   #修改localhost.localdomain为www

:wq!  #保存退出

vi /etc/hosts #编辑配置文件

127.0.0.1   localhost  www   #修改localhost.localdomain为www

:wq!  #保存退出

shutdown -r now  #重启系统
----------------------------------------------------------
update linux 4.10

rpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org
rpm -Uvh http://www.elrepo.org/elrepo-release-7.0-3.el7.elrepo.noarch.rpm
yum install yum-plugin-fastestmirror
# 查看系统信息
uname -r
# install linux-4.10
yum --enablerepo=elrepo-kernel install kernel-ml
# https://www.howtoforge.com/tutorial/how-to-upgrade-kernel-in-centos-7-server/
autoremove
reboot
# 查看系统信息
uname -r
yum install yum-utils

# 2019 Nov
#GCP BBR install
wget –no-check-certificate https://github.com/teddysun/across/raw/master/bbr.sh
chmod +x bbr.sh
sudo ./bbr.sh

# install and reboot

echo "net.core.default_qdisc=fq" >> /etc/sysctl.conf
echo "net.ipv4.tcp_congestion_control=bbr" >> /etc/sysctl.conf
sysctl -p
sudo sysctl net.ipv4.tcp_available_congestion_control
# check output "net.ipv4.tcp_available_congestion_control = bbr cubic reno"
sudo sysctl -n net.ipv4.tcp_congestion_control
# check output "bbr"
lsmod | grep bbr

sudo yum install python-pip -y
sudo pip install shadowsocks
sudo ssserver -p 443 -k win4sea.com -m aes-256-cfb --user nobody -d start
# stop
sudo ssserver -d stop
